{"ast":null,"code":"var _jsxFileName = \"/home/com109/Desktop/ad/my-app/src/screens/singlepost.js\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { updateLoginState } from \"../redux/actions\";\nimport SinglePostComponent from \"../components/singlepost/singlepostcomponent\";\nimport { ServerUrl, Routes } from \"../config\";\nimport serverCall, { DownloadImage } from \"../utilsFolder/utils\";\nconst {\n  Likes_Post,\n  ImageData\n} = Routes;\nconst zero = 0;\n\nconst SinglePost = props => {\n  // constructor(props) {\n  //   super(props);\n  //   this.state = {\n  //     imageId: this.props.match.params.id,\n  //     image: \"\",\n  //     username: \"\",\n  //     comment: [],\n  //     caption: \"\",\n  //     PostData: []\n  //     // hasError: false\n  //   };\n  // }\n  const [imageId, setImageId] = useState(this.props.match.params.id);\n  const [image, setImage] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [comment, setComment] = useState([]);\n  const [caption, setCaption] = useState(\"\");\n  const [postData, setPostData] = useState(\"\");\n  useEffect(() => {\n    this.notLogin();\n    this.getImageData();\n    window.scrollTo(0, 0);\n    props.updateLoginState(localStorage.getItem(\"userId\"));\n  });\n\n  const likePost = postID => {\n    let likedData = {\n      postId: postID,\n      userId: localStorage.getItem(\"userId\")\n    };\n    serverCall(Likes_Post, likedData).then(res => {\n      if (res) {\n        let PostDataOnLike = this.state.PostData;\n        PostDataOnLike[zero].likes = res.data.dataFromDatabase[zero].likes;\n        this.setState({\n          PostData: PostDataOnLike\n        });\n      }\n    });\n  };\n\n  const updatePostData = () => {\n    let postData = this.state.PostData;\n    postData[0].noOfComments = String(Number(postData[0].noOfComments) + 1);\n    this.setState({\n      PostData: postData\n    });\n  };\n\n  const getImageData = () => {\n    let imageID = {\n      id: this.state.imageId\n    };\n    serverCall(ImageData, imageID).then(res => {\n      if (res) {\n        this.setState({\n          PostData: [res.data.dataBase[0]]\n        });\n      }\n    }).catch(err => {\n      if (err.message === \"Network Error\") {\n        this.props.history.push(\"/errorpage\");\n      }\n    });\n  };\n\n  const notLogin = () => {\n    if (!localStorage.getItem(\"userId\")) {\n      this.props.history.push(\"/login\");\n    }\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(SinglePostComponent, {\n    history: this.props.history,\n    PostData: this.state.PostData,\n    likePost: this.likePost,\n    comment: this.state.comment,\n    uploadComment: this.uploadComment,\n    Download: DownloadImage,\n    imageId: this.state.imageId,\n    updatePostData: this.updatePostData,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }));\n};\n\nfunction mapStateToProps(state) {\n  return {\n    category: state.CategoryReducer.category\n  };\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    updateLoginState: data => dispatch(updateLoginState(data))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SinglePost);","map":{"version":3,"sources":["/home/com109/Desktop/ad/my-app/src/screens/singlepost.js"],"names":["React","connect","updateLoginState","SinglePostComponent","ServerUrl","Routes","serverCall","DownloadImage","Likes_Post","ImageData","zero","SinglePost","props","imageId","setImageId","useState","match","params","id","image","setImage","username","setUsername","comment","setComment","caption","setCaption","postData","setPostData","useEffect","notLogin","getImageData","window","scrollTo","localStorage","getItem","likePost","postID","likedData","postId","userId","then","res","PostDataOnLike","state","PostData","likes","data","dataFromDatabase","setState","updatePostData","noOfComments","String","Number","imageID","dataBase","catch","err","message","history","push","uploadComment","mapStateToProps","category","CategoryReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { updateLoginState } from \"../redux/actions\";\nimport SinglePostComponent from \"../components/singlepost/singlepostcomponent\";\nimport { ServerUrl, Routes } from \"../config\";\nimport serverCall, { DownloadImage } from \"../utilsFolder/utils\";\n\nconst { Likes_Post, ImageData } = Routes;\nconst zero = 0;\n\nconst SinglePost = props => {\n  // constructor(props) {\n  //   super(props);\n  //   this.state = {\n  //     imageId: this.props.match.params.id,\n  //     image: \"\",\n  //     username: \"\",\n  //     comment: [],\n  //     caption: \"\",\n  //     PostData: []\n  //     // hasError: false\n  //   };\n  // }\n\n  const [imageId, setImageId] = useState(this.props.match.params.id);\n  const [image, setImage] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [comment, setComment] = useState([]);\n  const [caption, setCaption] = useState(\"\");\n  const [postData, setPostData] = useState(\"\");\n\n  useEffect(() => {\n    this.notLogin();\n    this.getImageData();\n    window.scrollTo(0, 0);\n    props.updateLoginState(localStorage.getItem(\"userId\"));\n  });\n\n  const likePost = postID => {\n    let likedData = {\n      postId: postID,\n      userId: localStorage.getItem(\"userId\")\n    };\n    serverCall(Likes_Post, likedData).then(res => {\n      if (res) {\n        let PostDataOnLike = this.state.PostData;\n        PostDataOnLike[zero].likes = res.data.dataFromDatabase[zero].likes;\n        this.setState({ PostData: PostDataOnLike });\n      }\n    });\n  };\n\n  const updatePostData = () => {\n    let postData = this.state.PostData;\n    postData[0].noOfComments = String(Number(postData[0].noOfComments) + 1);\n    this.setState({ PostData: postData });\n  };\n\n  const getImageData = () => {\n    let imageID = { id: this.state.imageId };\n    serverCall(ImageData, imageID)\n      .then(res => {\n        if (res) {\n          this.setState({ PostData: [res.data.dataBase[0]] });\n        }\n      })\n      .catch(err => {\n        if (err.message === \"Network Error\") {\n          this.props.history.push(\"/errorpage\");\n        }\n      });\n  };\n\n  const notLogin = () => {\n    if (!localStorage.getItem(\"userId\")) {\n      this.props.history.push(\"/login\");\n    }\n  };\n\n  return (\n    <div>\n      <SinglePostComponent\n        history={this.props.history}\n        PostData={this.state.PostData}\n        likePost={this.likePost}\n        comment={this.state.comment}\n        uploadComment={this.uploadComment}\n        Download={DownloadImage}\n        imageId={this.state.imageId}\n        updatePostData={this.updatePostData}\n      />\n    </div>\n  );\n};\n\nfunction mapStateToProps(state) {\n  return { category: state.CategoryReducer.category };\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    updateLoginState: data => dispatch(updateLoginState(data))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SinglePost);\n"]},"metadata":{},"sourceType":"module"}