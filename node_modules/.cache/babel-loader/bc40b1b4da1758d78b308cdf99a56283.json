{"ast":null,"code":"var _jsxFileName = \"/home/com109/Desktop/ad/my-app/src/singlepost/commentsComponent.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Comment from \"./comment\";\nimport fetchData from \"../shared/sharedFunctions\";\nimport { Routes } from \"../config\";\nconst {\n  AllComments\n} = Routes;\n\nconst CommentsComponent = props => {\n  const {\n    uploadComment,\n    imageID\n  } = props;\n  const [comment, setComment] = useState(props.comments);\n  console.log(props.comments);\n  useEffect(() => {\n    allComments();\n  }, [props.comments.legth]); // useEffect(() => {\n  //   setComment(props.comments);\n  // }, [props.comments.length]);\n\n  const allComments = () => {\n    const data = {\n      imageId: imageID\n    };\n    fetchData(AllComments, data).then(res => {\n      if (res) {\n        const allCommentData = res.data.dataFromDatabase.map(data => {\n          return data;\n        });\n        setComment(allCommentData);\n      }\n    }).catch(err => {\n      if (err.message === \"Network Error\") {\n        this.props.history.push(\"/errorpage\");\n      }\n    });\n  };\n\n  return React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, comment ? comment.map((names, i) => React.createElement(Comment, {\n    key: i,\n    comments: names,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  })) : null, React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"cmnt_div1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: uploadComment,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Enter your Comment\",\n    className: \"cmnt_bx1\",\n    name: \"comment\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"sub_bttn1\",\n    defaultValue: \"Submit Comment\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  })))));\n};\n\nexport default CommentsComponent;","map":{"version":3,"sources":["/home/com109/Desktop/ad/my-app/src/singlepost/commentsComponent.js"],"names":["React","useState","useEffect","Comment","fetchData","Routes","AllComments","CommentsComponent","props","uploadComment","imageID","comment","setComment","comments","console","log","allComments","legth","data","imageId","then","res","allCommentData","dataFromDatabase","map","catch","err","message","history","push","names","i"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AAEA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,SAASC,MAAT,QAAuB,WAAvB;AAEA,MAAM;AAAEC,EAAAA;AAAF,IAAkBD,MAAxB;;AACA,MAAME,iBAAiB,GAAGC,KAAK,IAAI;AACjC,QAAM;AAAEC,IAAAA,aAAF;AAAiBC,IAAAA;AAAjB,MAA6BF,KAAnC;AAEA,QAAM,CAACG,OAAD,EAAUC,UAAV,IAAwBX,QAAQ,CAACO,KAAK,CAACK,QAAP,CAAtC;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYP,KAAK,CAACK,QAAlB;AAEAX,EAAAA,SAAS,CAAC,MAAM;AACdc,IAAAA,WAAW;AACZ,GAFQ,EAEN,CAACR,KAAK,CAACK,QAAN,CAAeI,KAAhB,CAFM,CAAT,CANiC,CAUjC;AACA;AACA;;AAEA,QAAMD,WAAW,GAAG,MAAM;AACxB,UAAME,IAAI,GAAG;AACXC,MAAAA,OAAO,EAAET;AADE,KAAb;AAGAN,IAAAA,SAAS,CAACE,WAAD,EAAcY,IAAd,CAAT,CACGE,IADH,CACQC,GAAG,IAAI;AACX,UAAIA,GAAJ,EAAS;AACP,cAAMC,cAAc,GAAGD,GAAG,CAACH,IAAJ,CAASK,gBAAT,CAA0BC,GAA1B,CAA8BN,IAAI,IAAI;AAC3D,iBAAOA,IAAP;AACD,SAFsB,CAAvB;AAGAN,QAAAA,UAAU,CAACU,cAAD,CAAV;AACD;AACF,KARH,EASGG,KATH,CASSC,GAAG,IAAI;AACZ,UAAIA,GAAG,CAACC,OAAJ,KAAgB,eAApB,EAAqC;AACnC,aAAKnB,KAAL,CAAWoB,OAAX,CAAmBC,IAAnB,CAAwB,YAAxB;AACD;AACF,KAbH;AAcD,GAlBD;;AAoBA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGlB,OAAO,GACJA,OAAO,CAACa,GAAR,CAAY,CAACM,KAAD,EAAQC,CAAR,KAAc,oBAAC,OAAD;AAAS,IAAA,GAAG,EAAEA,CAAd;AAAiB,IAAA,QAAQ,EAAED,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA1B,CADI,GAEJ,IAHN,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAM,IAAA,QAAQ,EAAErB,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,oBAFd;AAGE,IAAA,SAAS,EAAC,UAHZ;AAIE,IAAA,IAAI,EAAC,SAJP;AAKE,IAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAQE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,SAAS,EAAC,WAFZ;AAGE,IAAA,YAAY,EAAC,gBAHf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,CADF,CADF,CAJF,CADF;AAyBD,CA3DD;;AA4DA,eAAeF,iBAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport Comment from \"./comment\";\nimport fetchData from \"../shared/sharedFunctions\";\nimport { Routes } from \"../config\";\n\nconst { AllComments } = Routes;\nconst CommentsComponent = props => {\n  const { uploadComment, imageID } = props;\n\n  const [comment, setComment] = useState(props.comments);\n  console.log(props.comments);\n\n  useEffect(() => {\n    allComments();\n  }, [props.comments.legth]);\n\n  // useEffect(() => {\n  //   setComment(props.comments);\n  // }, [props.comments.length]);\n\n  const allComments = () => {\n    const data = {\n      imageId: imageID\n    };\n    fetchData(AllComments, data)\n      .then(res => {\n        if (res) {\n          const allCommentData = res.data.dataFromDatabase.map(data => {\n            return data;\n          });\n          setComment(allCommentData);\n        }\n      })\n      .catch(err => {\n        if (err.message === \"Network Error\") {\n          this.props.history.push(\"/errorpage\");\n        }\n      });\n  };\n\n  return (\n    <ul>\n      {comment\n        ? comment.map((names, i) => <Comment key={i} comments={names} />)\n        : null}\n      <li>\n        <div className=\"cmnt_div1\">\n          <form onSubmit={uploadComment}>\n            <input\n              type=\"text\"\n              placeholder=\"Enter your Comment\"\n              className=\"cmnt_bx1\"\n              name=\"comment\"\n              required\n            />\n            <input\n              type=\"submit\"\n              className=\"sub_bttn1\"\n              defaultValue=\"Submit Comment\"\n            />\n          </form>\n        </div>\n      </li>\n    </ul>\n  );\n};\nexport default CommentsComponent;\n"]},"metadata":{},"sourceType":"module"}